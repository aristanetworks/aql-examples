

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Health Examples &mdash; CloudVision Advanced Query Language 4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0190abbe" />

  
    <link rel="canonical" href="https://aql.arista.com/examples/system_health/index.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=71af5d5d"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Layer 2 and Layer 3 examples" href="../layer2_and_layer3/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            CloudVision Advanced Query Language - Revision 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index_doc.html">Language Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_stdlib.html">AQL Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Language revisions / Change log</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index_examples.html">AQL Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../interface_states/index.html">Interface States Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../layer2_and_layer3/index.html">Layer 2 and Layer 3 examples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">System Health Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#listing-of-devices-affected-by-fn44">Listing of devices affected by FN44</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eol-planning">EoL Planning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#listing-of-devices-affected-by-fn72">Listing of devices affected by FN72</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hardware-health-check">Hardware Health Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#power-supply-status-per-device">Power Supply Status per Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fan-status-per-device">Fan Status per Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temperature-sensors-per-device">Temperature Sensors per Device</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#important-pod-count">Important Pod Count</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#number-of-leaf-switches">Number of Leaf Switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="#number-of-vteps">Number of VTEPs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#total-vlan-count">Total VLAN Count</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-size-of-the-floodlist">Max Size of the Floodlist</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ntp-stats">NTP Stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#powersupply-output">PowerSupply Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#system-health-check">System Health Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cpu-utilization-in-the-fabric">CPU Utilization in the Fabric</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memory-usage-in-the-fabric">Memory Usage in the Fabric</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mnt-flash-usage">/mnt/flash usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tcam-capacity">TCAM Capacity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#r2-switches">7280R2 Switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="#x3-switches">7050X3 Switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="#r-switches">7020R Switches</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#listing-devices-that-have-a-file-in-var-core">Listing Devices that have a file in /var/core</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-the-serial-numbers-for-all-transceivers">List the serial numbers for all transceivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#list-the-transceiver-serial-numbers-that-match-the-input-regex">List the transceiver serial numbers that match the input regex</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CloudVision Advanced Query Language - Revision 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index_examples.html">AQL Examples</a></li>
      <li class="breadcrumb-item active">System Health Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/system_health/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="system-health-examples">
<h1>System Health Examples<a class="headerlink" href="#system-health-examples" title="Link to this heading"></a></h1>
<section id="listing-of-devices-affected-by-fn44">
<h2>Listing of devices affected by FN44<a class="headerlink" href="#listing-of-devices-affected-by-fn44" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">fixed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/hardware/entmib/fixedSystem`</span>
<span class="k">let</span><span class="w"> </span><span class="n">chassis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/hardware/entmib/chassis/cardSlot/*/card`</span>
<span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">fixed</span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">fx_temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">deviceValue</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">fx_temp</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="s">&quot;firmwareRev&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">fx_temp</span><span class="p">[</span><span class="s">&quot;firmwareRev&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">{</span>
<span class="w">        </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">setFields</span><span class="p">(</span><span class="s">&quot;Aboot version&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fx_temp</span><span class="p">[</span><span class="s">&quot;firmwareRev&quot;</span><span class="p">])</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">chassis</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">cx_tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">chassis</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">cx_tmp</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">card</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;firmwareRev&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">card</span><span class="p">[</span><span class="s">&quot;firmwareRev&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">setFields</span><span class="p">(</span><span class="s">&quot;Aboot version&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">card</span><span class="p">[</span><span class="s">&quot;firmwareRev&quot;</span><span class="p">])</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Aboot-norcal\d+-(\d+)\.(\d+)\.(\d+).*&quot;</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">result</span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">aboot</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">reFindCaptures</span><span class="p">(</span><span class="n">deviceValue</span><span class="p">[</span><span class="s">&quot;Aboot version&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">re</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">aboot</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">1</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">2</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">3</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">7</span><span class="w">  </span><span class="p">{</span>
<span class="w">                </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;🔥 True&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">2</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">3</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;🔥 True&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">1</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">2</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">3</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">9</span><span class="w">  </span><span class="p">{</span>
<span class="w">                </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;🔥 True&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">2</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">aboot</span><span class="p">[</span><span class="m">0</span><span class="p">][</span><span class="m">3</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;🔥 True&quot;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;✅ False&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;✅ False&quot;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;affected&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;✅ False&quot;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/abootfn44.png"><img alt="Listing of devices affected by FN44" src="../../_images/abootfn44.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/9b85207f1a78bdee8c6d81b58a857859/abootfn44.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="eol-planning">
<h2>EoL Planning<a class="headerlink" href="#eol-planning" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`analytics:/DatasetInfo/Devices`</span>
<span class="k">let</span><span class="w"> </span><span class="n">hardware</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/lifecycles/hardware`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">softwareLife</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/lifecycles/software`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/lifecycles/devices/software`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">skus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/BugAlerts/skus`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">modular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`analytics:/Devices/*/versioned-data/hardware/inventory/card`</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredSkus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">for</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">skus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w">  </span><span class="n">strContains</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;DCS-&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">filteredSkus</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">relNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="s">&quot;releaseDeprecated&quot;</span><span class="p">])</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;[]&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strSplit</span><span class="p">(</span><span class="k">str</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="s">&quot;releaseDeprecated&quot;</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">)[</span><span class="m">0</span><span class="p">]</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strReplace</span><span class="p">(</span><span class="n">deprecatedReleaseNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strReplace</span><span class="p">(</span><span class="n">deprecatedReleaseNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;]&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strReplace</span><span class="p">(</span><span class="n">deprecatedReleaseNum</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;\&quot;&quot;</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strSplit</span><span class="p">(</span><span class="n">deprecatedReleaseNum</span><span class="p">,</span><span class="s">&quot;.&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">relNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deprecatedReleaseNum</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">+</span><span class="s">&quot;.&quot;</span><span class="o">+</span><span class="k">str</span><span class="p">(</span><span class="k">num</span><span class="p">(</span><span class="n">deprecatedReleaseNum</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">filteredSkus</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s">&quot;releaseDeprecated&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">relNum</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">let</span><span class="w"> </span><span class="n">inv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">for</span><span class="w"> </span><span class="n">deviceUpdate</span><span class="p">,</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">deviceSN</span><span class="p">,</span><span class="w"> </span><span class="n">deviceData</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Chassis Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceSN</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Device&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;hostname&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Model&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;modelName&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Software&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;eosVersion&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Streaming Agent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;terminAttrVersion&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">hw</span><span class="p">,</span><span class="w"> </span><span class="n">hwEol</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">hardware</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w">  </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;modelName&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">hw</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Sale&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwEol</span><span class="p">[</span><span class="s">&quot;endOfSale&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Support&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwEol</span><span class="p">[</span><span class="s">&quot;endOfTACSupport&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of RMA Request&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwEol</span><span class="p">[</span><span class="s">&quot;endOfHardwareRMARequests&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Life&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwEol</span><span class="p">[</span><span class="s">&quot;endOfLife&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">switch</span><span class="p">,</span><span class="w"> </span><span class="n">switchEol</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">software</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w">  </span><span class="n">switch</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">deviceSN</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Software End of Life&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">switchEol</span><span class="p">[</span><span class="s">&quot;endOfSupport&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">skuKey</span><span class="p">,</span><span class="w"> </span><span class="n">skuVal</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">filteredSkus</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w">  </span><span class="n">strContains</span><span class="p">(</span><span class="n">skuKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;modelName&quot;</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Last Supported Software Train&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">skuVal</span><span class="p">[</span><span class="s">&quot;releaseDeprecated&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">sw</span><span class="p">,</span><span class="w"> </span><span class="n">swEol</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">softwareLife</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w">  </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">],</span><span class="s">&quot;Last Supported Software Train&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">sw</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Last Supported Software Train&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Last Supported Software Train EndOfLife&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">swEol</span><span class="p">[</span><span class="s">&quot;endOfSupport&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">let</span><span class="w"> </span><span class="n">merged_inv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">inventory</span><span class="p">)</span>
<span class="k">for</span><span class="w"> </span><span class="n">cardKey</span><span class="p">,</span><span class="w"> </span><span class="n">cardVal</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">modular</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">card</span><span class="p">,</span><span class="w"> </span><span class="n">cardSlot</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">cardVal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">cardSlot</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;modelName&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">cardSlot</span><span class="p">,</span><span class="s">&quot;serialNum&quot;</span><span class="p">){</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">serial_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardSlot</span><span class="p">[</span><span class="s">&quot;serialNum&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">serial_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">cardSlot</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;lifecycle&quot;</span><span class="p">){</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">lifecycle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardSlot</span><span class="p">[</span><span class="s">&quot;lifecycle&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;endOfLife&quot;</span><span class="p">){</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycle</span><span class="p">[</span><span class="s">&quot;endOfLife&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;endOfHardwareRMARequests&quot;</span><span class="p">){</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_rma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycle</span><span class="p">[</span><span class="s">&quot;endOfHardwareRMARequests&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_rma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;endOfSale&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_sale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycle</span><span class="p">[</span><span class="s">&quot;endOfSale&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_sale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">lifecycle</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;endOfTACSupport&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_tac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycle</span><span class="p">[</span><span class="s">&quot;endOfTACSupport&quot;</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">let</span><span class="w"> </span><span class="n">eol_tac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">eol_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">eol_rma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">eol_sale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">                </span><span class="k">let</span><span class="w"> </span><span class="n">eol_tac</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Sale&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eol_sale</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Support&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eol_tac</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of RMA Request&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eol_rma</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hardware End of Life&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">eol_date</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Module Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardSlot</span><span class="p">[</span><span class="s">&quot;serialNum&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Module&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardSlot</span><span class="p">[</span><span class="s">&quot;modelName&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Parent Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cardKey</span>
<span class="w">            </span><span class="n">inv</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Device&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merged_inv</span><span class="p">[</span><span class="n">cardKey</span><span class="p">][</span><span class="s">&quot;hostname&quot;</span><span class="p">]</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>

<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">inv</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/eol_planning.png"><img alt="EoL Planning" src="../../_images/eol_planning.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/c934687ff9ecb394044a37b78a0db889/eol_planning.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="listing-of-devices-affected-by-fn72">
<h2>Listing of devices affected by FN72<a class="headerlink" href="#listing-of-devices-affected-by-fn72" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">inventory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/DatasetInfo/Devices`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="k">for</span><span class="w"> </span><span class="n">dkey</span><span class="p">,</span><span class="w"> </span><span class="n">dval</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">inventory</span><span class="p">{</span>

<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">serial_slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strCut</span><span class="p">(</span><span class="n">dkey</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">7</span><span class="p">)</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dval</span><span class="p">[</span><span class="s">&quot;modelName&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dval</span><span class="p">[</span><span class="s">&quot;hostname&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">strContains</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;7280SR3-48YC8&quot;</span><span class="p">){</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">strHasPrefix</span><span class="p">(</span><span class="n">dkey</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;JPE&quot;</span><span class="p">){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">serial_slice</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">2131</span><span class="p">{</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hostname&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dkey</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Model&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">strHasPrefix</span><span class="p">(</span><span class="n">dkey</span><span class="p">,</span><span class="s">&quot;JAS&quot;</span><span class="p">){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">serial_slice</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">2041</span><span class="p">{</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hostname&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dkey</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Model&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">strContains</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;7280SR3K-48YC8&quot;</span><span class="p">){</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">strHasPrefix</span><span class="p">(</span><span class="n">dkey</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;JPE&quot;</span><span class="p">){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">serial_slice</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">2134</span><span class="p">{</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hostname&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dkey</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Model&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">strHasPrefix</span><span class="p">(</span><span class="n">dkey</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;JAS&quot;</span><span class="p">){</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="k">num</span><span class="p">(</span><span class="n">serial_slice</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">2041</span><span class="p">{</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Hostname&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hostname</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Serial Number&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dkey</span>
<span class="w">                </span><span class="n">affected</span><span class="p">[</span><span class="n">id</span><span class="p">][</span><span class="s">&quot;Model&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">model</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
<span class="n">affected</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/fn72.png"><img alt="Listing of devices affected by FN72" src="../../_images/fn72.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/79cf4fd868bf214c63f967d996b58bd5/fn72.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="hardware-health-check">
<h2>Hardware Health Check<a class="headerlink" href="#hardware-health-check" title="Link to this heading"></a></h2>
<section id="power-supply-status-per-device">
<h3>Power Supply Status per Device<a class="headerlink" href="#power-supply-status-per-device" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesSwitchLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/&lt;_SWITCH_ROLE&gt;/elements`</span><span class="p">)</span>


<span class="k">let</span><span class="w"> </span><span class="n">powerSupply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/environment/archer/power/status/powerSupply/*`</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredPsuStats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">powerSupply</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">powerSupply</span><span class="p">,</span><span class="w"> </span><span class="n">_key</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">recmap</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)[</span><span class="s">&quot;state&quot;</span><span class="p">][</span><span class="s">&quot;Name&quot;</span><span class="p">]))</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredPsuStats</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredPsuStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredPsuStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredPsuStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="n">result</span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">powerSupplyKey</span><span class="p">,</span><span class="w"> </span><span class="n">powerSupplyValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceValue</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">powerSupplyValue</span><span class="o">==</span><span class="s">&quot;ok&quot;</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">powerSupplyKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;✔️&quot;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">powerSupplyKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;❌&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
</section>
<section id="fan-status-per-device">
<h3>Fan Status per Device<a class="headerlink" href="#fan-status-per-device" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesSwitchLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/&lt;_SWITCH_ROLE&gt;/elements`</span><span class="p">)</span>

<span class="k">let</span><span class="w"> </span><span class="n">fans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/environment/archer/cooling/status/*`</span>
<span class="k">let</span><span class="w"> </span><span class="n">fansHwStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fans</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">fans</span><span class="p">,</span><span class="w"> </span><span class="n">_key</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">recmap</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)[</span><span class="s">&quot;hwStatus&quot;</span><span class="p">][</span><span class="s">&quot;Name&quot;</span><span class="p">]))</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fansHwStatus</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fansHwStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fansHwStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fansHwStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="n">result</span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">fansKey</span><span class="p">,</span><span class="w"> </span><span class="n">fansValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceValue</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">fansValue</span><span class="o">==</span><span class="s">&quot;ok&quot;</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">fansKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;✔️&quot;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">fansKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;❌&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
</section>
<section id="temperature-sensors-per-device">
<h3>Temperature Sensors per Device<a class="headerlink" href="#temperature-sensors-per-device" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesSwitchLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/&lt;_SWITCH_ROLE&gt;/elements`</span><span class="p">)</span>

<span class="k">let</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/environment/archer/temperature/status/cell/1/*`</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredTemperatureStats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temperature</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">temperature</span><span class="p">,</span><span class="w"> </span><span class="n">_key</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">recmap</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)[</span><span class="s">&quot;alertRaised&quot;</span><span class="p">]))</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredTemperatureStats</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredTemperatureStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredTemperatureStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredTemperatureStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="n">result</span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">sensorKey</span><span class="p">,</span><span class="w"> </span><span class="n">sensorValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceValue</span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">sensorValue</span><span class="o">==</span><span class="k">false</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">sensorKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;✔️&quot;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="p">{</span>
<span class="w">            </span><span class="n">result</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">sensorKey</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;❌&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/hardware_health_check.png"><img alt="Hardware Health Check" src="../../_images/hardware_health_check.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/52257ff7a9e1e11d2c327bdbbcd8a11a/hardware_health_check.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
</section>
<section id="important-pod-count">
<h2>Important Pod Count<a class="headerlink" href="#important-pod-count" title="Link to this heading"></a></h2>
<section id="number-of-leaf-switches">
<h3>Number of Leaf Switches<a class="headerlink" href="#number-of-leaf-switches" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesInCPOD1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/CPOD1/elements`</span><span class="p">)</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">leafs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">devicesInCPOD1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">leafs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span>
<span class="p">}</span>

<span class="n">leafs</span>
</pre></div>
</div>
</section>
<section id="number-of-vteps">
<h3>Number of VTEPs<a class="headerlink" href="#number-of-vteps" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesInCPOD1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/CPOD1/elements`</span><span class="p">)</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">devicesInCPOD1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">strContains</span><span class="p">(</span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;SPOD&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">length</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="o">+</span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">vteps</span>
</pre></div>
</div>
</section>
<section id="total-vlan-count">
<h3>Total VLAN Count<a class="headerlink" href="#total-vlan-count" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesInCPOD1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/CPOD1/elements`</span><span class="p">)</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/bridging/config/vlanConfig`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesInCPOD1</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/bridging/config/vlanConfig`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">numberVlan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">vlanKey</span><span class="p">,</span><span class="w"> </span><span class="n">vlanValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceValue</span><span class="p">{</span>
<span class="w">        </span><span class="n">numberVlan</span><span class="p">[</span><span class="n">vlanKey</span><span class="p">[</span><span class="s">&quot;value&quot;</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">length</span><span class="p">(</span><span class="n">numberVlan</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="max-size-of-the-floodlist">
<h3>Max Size of the Floodlist<a class="headerlink" href="#max-size-of-the-floodlist" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesInCPOD1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/CPOD1/elements`</span><span class="p">)</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">devicesCPOD1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/bridging/config/vlanConfig`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesInCPOD1</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">strContains</span><span class="p">(</span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;SPOD&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">length</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/bridging/config/vlanConfig`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vteps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/bridging/config/vlanConfig`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">numberVlan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>

<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vlanConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">vlanKey</span><span class="p">,</span><span class="w"> </span><span class="n">vlanValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceValue</span><span class="p">{</span>
<span class="w">        </span><span class="n">numberVlan</span><span class="p">[</span><span class="n">vlanKey</span><span class="p">[</span><span class="s">&quot;value&quot;</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">vlans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">numberVlan</span><span class="p">)</span>

<span class="n">vteps</span><span class="o">*</span><span class="n">vlans</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/important_pod_count.png"><img alt="ImportantPodCount" src="../../_images/important_pod_count.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/ad94948ce7891adf9d9ea5eb46c13d4b/important_pod_count.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
</section>
<section id="ntp-stats">
<h2>NTP Stats<a class="headerlink" href="#ntp-stats" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">ntpData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/NTP/status/system/variables`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="k">let</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">for</span><span class="w"> </span><span class="n">devID</span><span class="p">,</span><span class="n">devData</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ntpData</span><span class="p">{</span>
<span class="w">    </span><span class="n">output</span><span class="p">[</span><span class="n">devID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="w">    </span><span class="n">output</span><span class="p">[</span><span class="n">devID</span><span class="p">][</span><span class="s">&quot;peer&quot;</span><span class="p">]</span><span class="o">=</span><span class="w"> </span><span class="n">devData</span><span class="p">[</span><span class="s">&quot;refid&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">output</span><span class="p">[</span><span class="n">devID</span><span class="p">][</span><span class="s">&quot;Stratum&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">devData</span><span class="p">[</span><span class="s">&quot;stratum&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">output</span><span class="p">[</span><span class="n">devID</span><span class="p">][</span><span class="s">&quot;OffSet&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">devData</span><span class="p">[</span><span class="s">&quot;offset&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="n">output</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/ntp_stats.png"><img alt="NTP Stats" src="../../_images/ntp_stats.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/d2e3dbcd040aaaa58db8d0e970a7c602/ntp_stats.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="powersupply-output">
<h2>PowerSupply Output<a class="headerlink" href="#powersupply-output" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">powerSupply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`analytics:/Devices/*/versioned-data/environment/power/aggregate/*/out/15m`</span><span class="p">[</span><span class="s">48h</span><span class="p">]</span>
<span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">for</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">_device</span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">powerSupply</span><span class="p">,</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="k">for</span><span class="w"> </span><span class="n">psk</span><span class="p">,</span><span class="n">psv</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">powerSupply</span><span class="p">[</span><span class="n">key</span><span class="p">]{</span>
<span class="w">             </span><span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="o">+</span><span class="s">&quot;-&quot;</span><span class="o">+</span><span class="n">psk</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">powerSupply</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">psk</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;avg&quot;</span><span class="p">)</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/output_power_over_48h.png"><img alt="PowerSupply Output" src="../../_images/output_power_over_48h.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/4def4e6e3be120dc4508650622c1e068/output_power_over_48h.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="system-health-check">
<h2>System Health Check<a class="headerlink" href="#system-health-check" title="Link to this heading"></a></h2>
<section id="cpu-utilization-in-the-fabric">
<h3>CPU Utilization in the Fabric<a class="headerlink" href="#cpu-utilization-in-the-fabric" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="l">`analytics:/Devices/*/versioned-data/hardware/disk/\/mnt\/flash`</span>
<span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;usedPartitionPercent&quot;</span><span class="p">))</span>

<span class="k">let</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">i60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">b6080</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">s80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>

<span class="k">for</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">deviceData</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">deviceData</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;usedPartitionPercent&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;usedPartitionPercent&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">i60</span><span class="o">=</span><span class="n">i60</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">b6080</span><span class="o">=</span><span class="n">b6080</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">s80</span><span class="o">=</span><span class="n">s80</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">usageDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>

<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;Disk &lt; 60%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i60</span>
<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;60% &lt; Disk &lt; 80%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b6080</span>
<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;Disk &gt; 80%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s80</span>

<span class="n">usageDict</span>
</pre></div>
</div>
</section>
<section id="memory-usage-in-the-fabric">
<h3>Memory Usage in the Fabric<a class="headerlink" href="#memory-usage-in-the-fabric" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="l">`analytics:/Devices/*/versioned-data/hardware/meminfo/memoryUsage`</span>
<span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;usedMemoryPercent&quot;</span><span class="p">))</span>

<span class="k">let</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">i60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">b6070</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="k">let</span><span class="w"> </span><span class="n">s70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>

<span class="k">for</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">deviceData</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">deviceData</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;usedMemoryPercent&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceData</span><span class="p">[</span><span class="s">&quot;usedMemoryPercent&quot;</span><span class="p">]</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">i60</span><span class="o">=</span><span class="n">i60</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">b6070</span><span class="o">=</span><span class="n">b6070</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">70</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">s70</span><span class="o">=</span><span class="n">s70</span><span class="o">+</span><span class="m">1</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span><span class="w"> </span><span class="n">usageDict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>

<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;Memory &lt; 60%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i60</span>
<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;60% &lt; Memory &lt; 70%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b6070</span>
<span class="n">usageDict</span><span class="p">[</span><span class="s">&quot;Memory &gt; 70%&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s70</span>

<span class="n">usageDict</span>
</pre></div>
</div>
</section>
<section id="mnt-flash-usage">
<h3>/mnt/flash usage<a class="headerlink" href="#mnt-flash-usage" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_POD_NAME&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">devicesSwitchLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/&lt;_SWITCH_ROLE&gt;/elements`</span><span class="p">)</span>

<span class="k">let</span><span class="w"> </span><span class="n">deviceDisks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`analytics:/Devices/*/versioned-data/hardware/disk/\/mnt\/flash`</span>

<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceDisks</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_SWITCH_ROLE</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceDisks</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">strContains</span><span class="p">(</span><span class="k">str</span><span class="p">(</span><span class="n">devices</span><span class="p">),</span><span class="w"> </span><span class="n">_key</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_POD_NAME</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceDisks</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceDisks</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devicesSwitchLabel</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">data</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;usedPartitionPercent&quot;</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/system_health_check1.png"><img alt="system_health_check1" src="../../_images/system_health_check1.png" style="width: 600px;" />
</a>
<a class="reference internal image-reference" href="../../_images/system_health_check2.png"><img alt="system_health_check2" src="../../_images/system_health_check2.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/85a1c3cb31cdfce5ab78777987ef2a49/system_health_check.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
</section>
<section id="tcam-capacity">
<h2>TCAM Capacity<a class="headerlink" href="#tcam-capacity" title="Link to this heading"></a></h2>
<section id="r2-switches">
<h3>7280R2 Switches<a class="headerlink" href="#r2-switches" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="c"># Get the devices that have the egw (EVPN gateway) tag</span>
<span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/egw/elements`</span><span class="p">)</span>

<span class="c"># Get the L3 hardware capacity for all devices</span>
<span class="k">let</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">=</span><span class="l">`*:/Sysdb/hardware/capacity/status/l3/entry`</span>

<span class="c"># Get the devices that are part of a specific pod</span>
<span class="k">let</span><span class="w"> </span><span class="n">podDeviceList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_pod_name&gt;/elements`</span><span class="p">)</span>

<span class="c"># If the POD_NAME variable is not set (none) show the utilization for all pods</span>
<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_pod_name</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">podDeviceList</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">{</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;MAC&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LEM\&quot;, \&quot;feature\&quot;: \&quot;MAC\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LEM\&quot;, \&quot;feature\&quot;: \&quot;MAC\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;FEC Routing&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;FEC\&quot;, \&quot;feature\&quot;: \&quot;Routing\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;FEC\&quot;, \&quot;feature\&quot;: \&quot;Routing\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing1&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource1\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource1\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing2&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing3&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource3\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource3\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="p">}</span>
<span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;MAC&quot;</span><span class="p">,</span><span class="s">&quot;FEC Routing&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing3&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="x3-switches">
<h3>7050X3 Switches<a class="headerlink" href="#x3-switches" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="c"># Get the devices that have the `hdl` (high-density leaf) tag</span>
<span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/hdl/elements`</span><span class="p">)</span>

<span class="c"># Get the L3 hardware capacity for all devices</span>
<span class="k">let</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">=</span><span class="l">`*:/Sysdb/hardware/capacity/status/l3/entry`</span>

<span class="c"># Get the L2 hardware capacity for all devices</span>
<span class="k">let</span><span class="w"> </span><span class="n">hwCapL2</span><span class="w"> </span><span class="o">=</span><span class="l">`*:/Sysdb/hardware/capacity/status/l2/entry`</span>

<span class="c"># Get the devices that are part of a specific pod</span>
<span class="k">let</span><span class="w"> </span><span class="n">podDeviceList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_pod_name&gt;/elements`</span><span class="p">)</span>

<span class="c"># If the POD_NAME variable is not set (none) show the utilization for all pods</span>
<span class="k">if</span><span class="w"> </span><span class="k">str</span><span class="p">(</span><span class="n">_pod_name</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">podDeviceList</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">podDeviceList</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="p">}</span>

<span class="c"># Build a new table with MAC, HOST, LPM and NextHop utilization</span>
<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">{</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Host Percent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;Host\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;Host\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;LPM Percent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LPM\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LPM\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;NextHop Percent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;NextHop\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;NextHop\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;MAC Percent&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL2</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Linecard0/0\&quot;, \&quot;table\&quot;:\&quot;MAC\&quot;, \&quot;feature\&quot;: \&quot;L2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL2</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Linecard0/0\&quot;, \&quot;table\&quot;:\&quot;MAC\&quot;, \&quot;feature\&quot;: \&quot;L2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="p">}</span>
<span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;MAC Percent&quot;</span><span class="p">,</span><span class="s">&quot;Host Percent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;LPM Percent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NextHop Percent&quot;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="r-switches">
<h3>7020R Switches<a class="headerlink" href="#r-switches" title="Link to this heading"></a></h3>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="c"># Get the devices that have the `ldl` (low-density leaf) tag</span>
<span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/switch_role/value/ldl/elements`</span><span class="p">)</span>

<span class="c"># Get the L3 hardware capacity for all devices</span>
<span class="k">let</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">=</span><span class="l">`*:/Sysdb/hardware/capacity/status/l3/entry`</span>

<span class="c"># Get the multicast hardware capacity for all devices</span>
<span class="k">let</span><span class="w"> </span><span class="n">hwCapMcast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/hardware/capacity/status/mcast/entry`</span>

<span class="c"># Get the devices that are part of a specific pod</span>
<span class="k">let</span><span class="w"> </span><span class="n">podDeviceList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="l">`analytics:/tags/labels/devices/pod_name/value/&lt;_pod_name&gt;/elements`</span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">podDeviceList</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredHwCapMcast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hwCapMcast</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">podDeviceList</span><span class="p">,</span><span class="w"> </span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;deviceID\&quot;: \&quot;&quot;</span><span class="o">+</span><span class="n">_key</span><span class="o">+</span><span class="s">&quot;\&quot;}&quot;</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="p">)</span>

<span class="c"># Build a new table with MAC, MCDB, FEC Routing, Routing1, Routing2 and Routing3 utilization</span>
<span class="k">for</span><span class="w"> </span><span class="n">deviceKey</span><span class="p">,</span><span class="w"> </span><span class="n">deviceValue</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">{</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;MAC&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LEM\&quot;, \&quot;feature\&quot;: \&quot;MAC\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;LEM\&quot;, \&quot;feature\&quot;: \&quot;MAC\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;FEC Routing&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;FEC\&quot;, \&quot;feature\&quot;: \&quot;Routing\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;\&quot;, \&quot;table\&quot;:\&quot;FEC\&quot;, \&quot;feature\&quot;: \&quot;Routing\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing1&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource1\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource1\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing2&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource2\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;Routing3&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource3\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho\&quot;, \&quot;table\&quot;:\&quot;Routing\&quot;, \&quot;feature\&quot;: \&quot;Resource3\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="w">    </span><span class="n">filteredHwCapL3</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="s">&quot;MCDB&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filteredHwCapMcast</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho0\&quot;, \&quot;table\&quot;:\&quot;MCDB\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;used&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">filteredHwCapMcast</span><span class="p">[</span><span class="n">deviceKey</span><span class="p">][</span><span class="n">complexKey</span><span class="p">(</span><span class="s">&quot;{\&quot;chip\&quot;: \&quot;Jericho0\&quot;, \&quot;table\&quot;:\&quot;MCDB\&quot;, \&quot;feature\&quot;: \&quot;\&quot;}&quot;</span><span class="p">)][</span><span class="s">&quot;maxLimit&quot;</span><span class="p">]</span><span class="o">*</span><span class="m">100</span>
<span class="p">}</span>

<span class="n">filteredHwCapL3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fields</span><span class="p">(</span><span class="s">&quot;MAC&quot;</span><span class="p">,</span><span class="s">&quot;MCDB&quot;</span><span class="p">,</span><span class="s">&quot;FEC Routing&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Routing3&quot;</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/tcam_capacity.png"><img alt="TCAM Capacity" src="../../_images/tcam_capacity.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/46281ae76b1bcd2f68154b533d4dc2fc/tcam_capacity.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
</section>
<section id="listing-devices-that-have-a-file-in-var-core">
<h2>Listing Devices that have a file in /var/core<a class="headerlink" href="#listing-devices-that-have-a-file-in-var-core" title="Link to this heading"></a></h2>
<p>&gt; Useful to understand if there were any agent crashes on EOS</p>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`analytics:/Devices/*/versioned-data/Device`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">)[</span><span class="s">&quot;hostname&quot;</span><span class="p">])</span>
<span class="k">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span>
<span class="k">let</span><span class="w"> </span><span class="n">deviceDiskStats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Kernel/vfs/stat/\/var\/core`</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">_value</span><span class="p">))</span>
<span class="k">let</span><span class="w"> </span><span class="n">deviceDiskStats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceDiskStats</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;blocks&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">dictHasKey</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bfree&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_value</span><span class="p">[</span><span class="s">&quot;blocks&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">_value</span><span class="p">[</span><span class="s">&quot;bfree&quot;</span><span class="p">])</span>
<span class="k">for</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="n">diskStat</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">deviceDiskStats</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="p">[</span><span class="n">devices</span><span class="p">[</span><span class="n">device</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newDict</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">setFields</span><span class="p">(</span><span class="s">&quot;value&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">result</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/varcore.png"><img alt="varcore files" src="../../_images/varcore.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/de6f3f61da31241148847b673339120f/varcore.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="list-the-serial-numbers-for-all-transceivers">
<h2>List the serial numbers for all transceivers<a class="headerlink" href="#list-the-serial-numbers-for-all-transceivers" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">xcvrStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/hardware/archer/xcvr/status/all/*`</span>
<span class="k">let</span><span class="w"> </span><span class="n">filteredXcvrStat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xcvrStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mapne</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;vendorInfo&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;vendorSn&quot;</span><span class="p">)))</span>
<span class="n">filteredXcvrStat</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mapne</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="p">[</span><span class="m">0</span><span class="p">]))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/xcvr_sn_list.png"><img alt="List the serial numbers for all transceivers" src="../../_images/xcvr_sn_list.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/430ffc3827e9c209b9122a4036a9b9bd/xcvr_sn_list.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
<section id="list-the-transceiver-serial-numbers-that-match-the-input-regex">
<h2>List the transceiver serial numbers that match the input regex<a class="headerlink" href="#list-the-transceiver-serial-numbers-that-match-the-input-regex" title="Link to this heading"></a></h2>
<div class="highlight-aql notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">`*:/Sysdb/hardware/archer/xcvr/status/all/*`</span>
<span class="k">let</span><span class="w"> </span><span class="n">xcvrStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mapne</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;vendorInfo&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">field</span><span class="p">(</span><span class="s">&quot;vendorSn&quot;</span><span class="p">)))</span>
<span class="k">let</span><span class="w"> </span><span class="n">xcvrStatus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xcvrStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">mapne</span><span class="p">(</span><span class="n">_value</span><span class="p">[</span><span class="m">0</span><span class="p">],</span><span class="w"> </span><span class="n">_value</span><span class="p">))</span>

<span class="n">xcvrStatus</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">map</span><span class="p">(</span><span class="n">_value</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">reMatch</span><span class="p">(</span><span class="n">_value</span><span class="p">,</span><span class="w"> </span><span class="n">_regexInput</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/xcvr_sn_list_filtered.png"><img alt="List the transceiver serial numbers that match the input regex" src="../../_images/xcvr_sn_list_filtered.png" style="width: 600px;" />
</a>
<p><a class="reference download internal" download="" href="../../_downloads/2946232ea3da42fd32d1958cdd355eb3/xcvr_sn_list_filtered.json"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">the</span> <span class="pre">Dashboard</span> <span class="pre">JSON</span> <span class="pre">here</span></code></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../layer2_and_layer3/index.html" class="btn btn-neutral float-left" title="Layer 2 and Layer 3 examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Arista Networks.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>